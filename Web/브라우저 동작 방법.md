todo

- html 명세



# 브라우저

## 브라우저 주요 기능

- 사용자가 선택한 자원을 서버에 요청, 브라우저에 표시
  - 자원 : HTML, PDF, image, ...
  - 자원의 주소 : URL
- 브라우저는 html과 css 명세에 따라 html파일을 해석해서 표시한다(렌더링 엔진)
  - 명세 : W3C(World Wide Web Consortium)에서 정하는 표준
    - [W3C vs WHATWG](https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&blogId=jodi999&logNo=220822079266)
  - 브라우저의 인터페이스는 서로 비슷한 요소가 많아서 표준 명세를 정하는 것이 개발 시에 유리하다



## 브라우저 기본 구조

![img](https://d2.naver.com/content/images/2015/06/helloworld-59361-1.png)



- 사용자 인터페이스
  - 사용자가 활용하는 서비스들
    - 주소표시줄, 이전/다음 버튼, 새로고침 버튼 등
    - 요청한 페이지를 보여주는 창은 제외

- 브라우저 엔진
  - 사용자 인터페이서와 렌더링 엔진 사이의 동작 제어

- 렌더링 엔진
  - 요청한 콘텐츠 표시
  - html요청 수신 -> html, css 파싱해서 화면서 표시
- 통신
  - http요청과 같은 네트워크 호출에 사용
  - 플랫폼 독립적 인터페이스
- UI 백엔드
  - 플랫폼에서 명시하지 않은 일반적 인터페이스
  - 콤보박스 등 기본적 장치를 그린다
  - OS사용자 인테페이스 체계를 따름
- 자바스크립트 해석기
  - 자바스크립트 코드 해석, 실행
- 자료 저장소
  - 쿠키 등 모든 종류의 자원을 하드 디스크에 저장



# 렌더링 엔진

- 요청받은 내용을 해석해 브라우저의 화면에 표시한다.
  - html, xml 문저와 이미지 등
  - 플러기인이나 브라우저의 확장 기능을 이용해 pdf등 다른 유형의 콘텐츠도 표시할 수 있다.



- 종류
  - Webkit : 크롬, 사파리에서 사용
  - Gecko :  파이어폭스에서 사용



- 동작

  ![img](https://d2.naver.com/content/images/2015/06/helloworld-59361-3.png)

  1. html 문서 파싱(분석)
  2. 콘텐츠 트리 내부에서 태그를 전부 DOM노드로 변환한다.
  3. 스타일 요소를 파싱한다.
     1. 외부 css 파일도 포함됨
  4. 렌더 트리 생성
     1. 3번의 스타일 정보와 html표시 규칙을 이용해 생성한다.
  5. 렌더 트리 생성이 완료되면 정해진 순서대로 화면에 표시된다.
  6. UI백엔드에서 렌더 트리의 각 노드를 가로지르면 형상을 만든다.
  7. 사용자에게 더 빠르게 화면을 보여주기 위해
     모든 html을 파싱하지 않다라도 배치와 그리기 과정을 시작한다.
     1. 전송을 받고 기다리는 동시에 받은 내용을 먼저 화면에 보여줌



## DOM

- Document Object Model
- 웹 브라우저가 html페이지를 인식하는 방법
- 자바스크립트가 활용할 수 있도록 웹페이지 소스의 태그를 객체로 만들면 문서 객체가 된다.



## 파싱

- 문서 파싱
  - 브라우저가 서버로부터 받은 문서를 이해하고 사용할 수 있는 구조(트리, DOM, ...)로 변환하는 것
- 어휘 분석 + 구문 분석
  - 언어의 구문 규칙에 따라 문서 구조를 분석
  - 구문 규칙과 일치하는 노드만 파싱 트리에 추가됨.
  - 끝까지 규칙이 맞지 않는 부분은 문서가 유효하지 않고 구문 오류가 포함되어 있다는 의미
- 파서 트리는 다시 기계코드 문서로 변환시켜야 최종 결과가 된다.
- 파서 생성기
  - 위의 과정이 복잡하고 최적화가 어려움
  - 자동으로 파서 트리를 만들어준다.
- 





# 참고

[브라우저는 어떻게 동작하는가](https://d2.naver.com/helloworld/59361)
